{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/arije/OneDrive/Desktop/MinorProject/track-donations/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/arije/OneDrive/Desktop/MinorProject/track-donations/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/arije/OneDrive/Desktop/MinorProject/track-donations/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useRef,useState}from\"react\";import{Redirect}from\"react-router-dom\";import{detailsABI,detailsAddress}from\"../detailsContract/constants\";import{ethers}from\"ethers\";import\"./CreateMyCampaignForm.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CreateCampaignForm=function CreateCampaignForm(){var _window=window,ethereum=_window.ethereum;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),created=_useState2[0],setCreated=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),logIn=_useState4[0],setLogIn=_useState4[1];var _useState5=useState(\"CREATE CAMPAIGN\"),_useState6=_slicedToArray(_useState5,2),buttonText=_useState6[0],setButtonText=_useState6[1];var emailInputRef=useRef();var phoneInputRef=useRef();var ngoNameRef=useRef();var objectiveRef=useRef();var minimumDonationRef=useRef();var targetAmountRef=useRef();var walletAddressRef=useRef();var createEthereumContract=function createEthereumContract(){var provider=new ethers.providers.Web3Provider(ethereum);var signer=provider.getSigner();var detailsContract=new ethers.Contract(detailsAddress,detailsABI,signer);return detailsContract;};var detailsContract=createEthereumContract();function handleLogIn(){setLogIn(true);}var submitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var enteredEmail,enteredPhone,enteredNGO,enteredObjective,enteredMinimum,enteredTarget,enteredWallet,detailsHash;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();enteredEmail=emailInputRef.current.value;enteredPhone=phoneInputRef.current.value;enteredNGO=ngoNameRef.current.value;enteredObjective=objectiveRef.current.value;enteredMinimum=minimumDonationRef.current.value;enteredTarget=targetAmountRef.current.value;enteredWallet=walletAddressRef.current.value;_context.next=10;return detailsContract.addCampaign(enteredEmail,enteredMinimum,enteredNGO,enteredObjective,enteredPhone,enteredTarget,enteredWallet);case 10:detailsHash=_context.sent;setButtonText(\"CREATING CAMPAIGN...\");_context.next=14;return detailsHash.wait();case 14:_context.next=16;return detailsContract.getCampaigns();case 16:setCreated(true);setButtonText(\"CAMPAIGN CREATED. LOG IN.\");case 18:case\"end\":return _context.stop();}}},_callee);}));return function submitHandler(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"container-super\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"create-campaign\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"CREATE YOUR CAMPAIGN\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"control\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"info-mail\",className:\"contact\",type:\"email\",placeholder:\"Email\",required:true,autoComplete:\"off\",ref:emailInputRef}),/*#__PURE__*/_jsx(\"input\",{id:\"info-phone\",type:\"text\",className:\"contact\",placeholder:\"Phone Number\",required:true,autoComplete:\"off\",ref:phoneInputRef})]}),/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"input\",{id:\"name-ngo-individual\",type:\"text\",className:\"NGO\",placeholder:\"Name (NGO/Individual)\",required:true,autoComplete:\"off\",ref:ngoNameRef})}),/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"input\",{id:\"misson-objective\",type:\"text\",className:\"objective\",placeholder:\"Mission/Objective\",required:true,autoComplete:\"off\",ref:objectiveRef})}),/*#__PURE__*/_jsx(\"div\",{className:\"control min-do\",children:/*#__PURE__*/_jsx(\"input\",{id:\"minimum-donation\",type:\"number\",className:\"min\",step:0.00000000001,min:0.00000000001,required:true,placeholder:\"Minimum Donation in ETH\",ref:minimumDonationRef})}),/*#__PURE__*/_jsx(\"div\",{className:\"control t-amo\",children:/*#__PURE__*/_jsx(\"input\",{id:\"target-amount\",type:\"number\",className:\"target\",step:0.00000000001,min:0.00000000001,required:true,autoComplete:\"off\",placeholder:\"Target Amount\",ref:targetAmountRef})}),/*#__PURE__*/_jsx(\"div\",{className:\"control\",children:/*#__PURE__*/_jsx(\"input\",{id:\"metamask-wallet-address\",type:\"address\",className:\"waddress\",placeholder:\"MetaMask Wallet Address\",required:true,autoComplete:\"off\",ref:walletAddressRef})}),!created&&/*#__PURE__*/_jsx(\"button\",{className:\"button-su transaction-list-btn\",type:\"submit\",children:buttonText}),created&&/*#__PURE__*/_jsx(\"button\",{className:\"button-su transaction-list-btn\",onClick:handleLogIn,type:\"button\",children:buttonText})]})]}),logIn&&/*#__PURE__*/_jsx(Redirect,{to:\"/liN\"})]});};export default CreateCampaignForm;","map":{"version":3,"names":["useRef","useState","Redirect","detailsABI","detailsAddress","ethers","CreateCampaignForm","window","ethereum","created","setCreated","logIn","setLogIn","buttonText","setButtonText","emailInputRef","phoneInputRef","ngoNameRef","objectiveRef","minimumDonationRef","targetAmountRef","walletAddressRef","createEthereumContract","provider","providers","Web3Provider","signer","getSigner","detailsContract","Contract","handleLogIn","submitHandler","event","preventDefault","enteredEmail","current","value","enteredPhone","enteredNGO","enteredObjective","enteredMinimum","enteredTarget","enteredWallet","addCampaign","detailsHash","wait","getCampaigns"],"sources":["C:/Users/arije/OneDrive/Desktop/MinorProject/track-donations/src/components/createCampaign/CreateCampaignForm.js"],"sourcesContent":["import { useRef, useState } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { detailsABI, detailsAddress } from \"../detailsContract/constants\";\r\nimport { ethers } from \"ethers\";\r\nimport \"./CreateMyCampaignForm.css\";\r\nconst CreateCampaignForm = () => {\r\n  const { ethereum } = window;\r\n  const [created, setCreated] = useState(false);\r\n  const [logIn, setLogIn] = useState(false);\r\n  const [buttonText, setButtonText] = useState(\"CREATE CAMPAIGN\");\r\n\r\n  const emailInputRef = useRef();\r\n  const phoneInputRef = useRef();\r\n  const ngoNameRef = useRef();\r\n  const objectiveRef = useRef();\r\n  const minimumDonationRef = useRef();\r\n  const targetAmountRef = useRef();\r\n  const walletAddressRef = useRef();\r\n\r\n  const createEthereumContract = () => {\r\n    const provider = new ethers.providers.Web3Provider(ethereum);\r\n    const signer = provider.getSigner();\r\n    const detailsContract = new ethers.Contract(\r\n      detailsAddress,\r\n      detailsABI,\r\n      signer\r\n    );\r\n    return detailsContract;\r\n  };\r\n\r\n  const detailsContract = createEthereumContract();\r\n\r\n  function handleLogIn() {\r\n    setLogIn(true);\r\n  }\r\n\r\n  const submitHandler = async (event) => {\r\n    event.preventDefault();\r\n\r\n    const enteredEmail = emailInputRef.current.value;\r\n    const enteredPhone = phoneInputRef.current.value;\r\n    const enteredNGO = ngoNameRef.current.value;\r\n    const enteredObjective = objectiveRef.current.value;\r\n    const enteredMinimum = minimumDonationRef.current.value;\r\n    const enteredTarget = targetAmountRef.current.value;\r\n    const enteredWallet = walletAddressRef.current.value;\r\n    const detailsHash = await detailsContract.addCampaign(\r\n      enteredEmail,\r\n      enteredMinimum,\r\n      enteredNGO,\r\n      enteredObjective,\r\n      enteredPhone,\r\n      enteredTarget,\r\n      enteredWallet\r\n    );\r\n    setButtonText(\"CREATING CAMPAIGN...\");\r\n    await detailsHash.wait();\r\n    await detailsContract.getCampaigns();\r\n    setCreated(true);\r\n    setButtonText(\"CAMPAIGN CREATED. LOG IN.\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"container-super\">\r\n      <section className=\"create-campaign\">\r\n        <h1>CREATE YOUR CAMPAIGN</h1>\r\n        <form onSubmit={submitHandler}>\r\n          <div className=\"control\">\r\n            <input\r\n              id=\"info-mail\"\r\n              className=\"contact\"\r\n              type=\"email\"\r\n              placeholder=\"Email\"\r\n              required\r\n              autoComplete=\"off\"\r\n              ref={emailInputRef}\r\n            ></input>\r\n\r\n            <input\r\n              id=\"info-phone\"\r\n              type=\"text\"\r\n              className=\"contact\"\r\n              placeholder=\"Phone Number\"\r\n              required\r\n              autoComplete=\"off\"\r\n              ref={phoneInputRef}\r\n            ></input>\r\n          </div>\r\n          <div className=\"control\">\r\n            <input\r\n              id=\"name-ngo-individual\"\r\n              type=\"text\"\r\n              className=\"NGO\"\r\n              placeholder=\"Name (NGO/Individual)\"\r\n              required\r\n              autoComplete=\"off\"\r\n              ref={ngoNameRef}\r\n            ></input>\r\n          </div>\r\n          <div className=\"control\">\r\n            <input\r\n              id=\"misson-objective\"\r\n              type=\"text\"\r\n              className=\"objective\"\r\n              placeholder=\"Mission/Objective\"\r\n              required\r\n              autoComplete=\"off\"\r\n              ref={objectiveRef}\r\n            ></input>\r\n          </div>\r\n          <div className=\"control min-do\">\r\n            <input\r\n              id=\"minimum-donation\"\r\n              type=\"number\"\r\n              className=\"min\"\r\n              step={0.00000000001}\r\n              min={0.00000000001}\r\n              required\r\n              placeholder=\"Minimum Donation in ETH\"\r\n              ref={minimumDonationRef}\r\n            ></input>\r\n          </div>\r\n          <div className=\"control t-amo\">\r\n            <input\r\n              id=\"target-amount\"\r\n              type=\"number\"\r\n              className=\"target\"\r\n              step={0.00000000001}\r\n              min={0.00000000001}\r\n              required\r\n              autoComplete=\"off\"\r\n              placeholder=\"Target Amount\"\r\n              ref={targetAmountRef}\r\n            ></input>\r\n          </div>\r\n          <div className=\"control\">\r\n            <input\r\n              id=\"metamask-wallet-address\"\r\n              type=\"address\"\r\n              className=\"waddress\"\r\n              placeholder=\"MetaMask Wallet Address\"\r\n              required\r\n              autoComplete=\"off\"\r\n              ref={walletAddressRef}\r\n            ></input>\r\n          </div>\r\n          {!created && (\r\n            <button className=\"button-su transaction-list-btn\" type=\"submit\">\r\n              {buttonText}\r\n            </button>\r\n          )}\r\n          {created && (\r\n            <button\r\n              className=\"button-su transaction-list-btn\"\r\n              onClick={handleLogIn}\r\n              type=\"button\"\r\n            >\r\n              {buttonText}\r\n            </button>\r\n          )}\r\n        </form>\r\n      </section>\r\n      {logIn && <Redirect to=\"/liN\" />}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreateCampaignForm;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}