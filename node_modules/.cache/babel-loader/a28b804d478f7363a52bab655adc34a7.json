{"ast":null,"code":"import _slicedToArray from\"C:/Users/arije/OneDrive/Desktop/MinorProject/track-donations/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useRef,useState}from\"react\";import{Redirect}from\"react-router-dom\";// import { Redirect } from \"react-router-dom\";\nimport\"./LogIn.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function LogInAsDonor(){var emailInputRef=useRef();var passwordInputRef=useRef();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLogin=_useState2[0],setIsLogin=_useState2[1];function saveTokenInLocalStorage(tokenDetails){localStorage.setItem(\"userEmail\",JSON.stringify(tokenDetails));}var submitHandler=function submitHandler(event){event.preventDefault();var enteredEmail=emailInputRef.current.value;var enteredPassword=passwordInputRef.current.value;fetch(\"https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyB0I1gvMRvmO1maRsFbDKMS1K_GPzNt1r0\",{method:\"POST\",body:JSON.stringify({email:enteredEmail,password:enteredPassword,returnSecureToken:true}),headers:{\"Content-Type\":\"application/json\"}}).then(function(res){if(res.ok){setIsLogin(true);return res.json();}else{return res.json().then(function(){var errorMessage=\"Authentication Failed!\";setIsLogin(false);alert(errorMessage);throw new Error(errorMessage);});}}).then(function(data){// console.log(data);\nsaveTokenInLocalStorage(data.email);}).catch(function(err){alert(err.message);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"container10\",children:[/*#__PURE__*/_jsxs(\"form\",{className:\"login\",onSubmit:submitHandler,children:[/*#__PURE__*/_jsx(\"h1\",{className:\"head\",children:\"DONOR LOG IN\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"login__input\",placeholder:\"Email\",ref:emailInputRef}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"login__input\",placeholder:\"Password\",ref:passwordInputRef}),!isLogin&&/*#__PURE__*/_jsx(\"button\",{className:\"button-su transaction-list-btn\",children:\"LOG IN\"})]}),isLogin&&/*#__PURE__*/_jsx(Redirect,{to:\"/homePage\"})]});}export default LogInAsDonor;","map":{"version":3,"names":["React","useRef","useState","Redirect","LogInAsDonor","emailInputRef","passwordInputRef","isLogin","setIsLogin","saveTokenInLocalStorage","tokenDetails","localStorage","setItem","JSON","stringify","submitHandler","event","preventDefault","enteredEmail","current","value","enteredPassword","fetch","method","body","email","password","returnSecureToken","headers","then","res","ok","json","errorMessage","alert","Error","data","catch","err","message"],"sources":["C:/Users/arije/OneDrive/Desktop/MinorProject/track-donations/src/components/Auth/LogInAsDonor.js"],"sourcesContent":["import React, { useRef, useState } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\n// import { Redirect } from \"react-router-dom\";\r\n\r\nimport \"./LogIn.css\";\r\nfunction LogInAsDonor() {\r\n  const emailInputRef = useRef();\r\n  const passwordInputRef = useRef();\r\n  const [isLogin, setIsLogin] = useState(false);\r\n  function saveTokenInLocalStorage(tokenDetails) {\r\n    localStorage.setItem(\"userEmail\", JSON.stringify(tokenDetails));\r\n  }\r\n  const submitHandler = (event) => {\r\n    event.preventDefault();\r\n\r\n    const enteredEmail = emailInputRef.current.value;\r\n    const enteredPassword = passwordInputRef.current.value;\r\n    fetch(\r\n      \"https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyB0I1gvMRvmO1maRsFbDKMS1K_GPzNt1r0\",\r\n      {\r\n        method: \"POST\",\r\n        body: JSON.stringify({\r\n          email: enteredEmail,\r\n          password: enteredPassword,\r\n          returnSecureToken: true,\r\n        }),\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n      }\r\n    )\r\n      .then((res) => {\r\n        if (res.ok) {\r\n          setIsLogin(true);\r\n          return res.json();\r\n        } else {\r\n          return res.json().then(() => {\r\n            let errorMessage = \"Authentication Failed!\";\r\n            setIsLogin(false);\r\n            alert(errorMessage);\r\n            throw new Error(errorMessage);\r\n          });\r\n        }\r\n      })\r\n      .then((data) => {\r\n        // console.log(data);\r\n        saveTokenInLocalStorage(data.email);\r\n      })\r\n      .catch((err) => {\r\n        alert(err.message);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"container10\">\r\n      <form className=\"login\" onSubmit={submitHandler}>\r\n        <h1 className=\"head\">DONOR LOG IN</h1>\r\n        <input\r\n          type=\"text\"\r\n          className=\"login__input\"\r\n          placeholder=\"Email\"\r\n          ref={emailInputRef}\r\n        />\r\n        <br />\r\n        <input\r\n          type=\"password\"\r\n          className=\"login__input\"\r\n          placeholder=\"Password\"\r\n          ref={passwordInputRef}\r\n        />\r\n        {!isLogin && (\r\n          <button className=\"button-su transaction-list-btn\">LOG IN</button>\r\n        )}\r\n      </form>\r\n      {isLogin && <Redirect to=\"/homePage\" />}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LogInAsDonor;\r\n"],"mappings":"kJAAA,MAAOA,MAAP,EAAgBC,MAAhB,CAAwBC,QAAxB,KAAwC,OAAxC,CACA,OAASC,QAAT,KAAyB,kBAAzB,CACA;AAEA,MAAO,aAAP,C,wFACA,QAASC,aAAT,EAAwB,CACtB,GAAMC,cAAa,CAAGJ,MAAM,EAA5B,CACA,GAAMK,iBAAgB,CAAGL,MAAM,EAA/B,CACA,cAA8BC,QAAQ,CAAC,KAAD,CAAtC,wCAAOK,OAAP,eAAgBC,UAAhB,eACA,QAASC,wBAAT,CAAiCC,YAAjC,CAA+C,CAC7CC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAkCC,IAAI,CAACC,SAAL,CAAeJ,YAAf,CAAlC,EACD,CACD,GAAMK,cAAa,CAAG,QAAhBA,cAAgB,CAACC,KAAD,CAAW,CAC/BA,KAAK,CAACC,cAAN,GAEA,GAAMC,aAAY,CAAGb,aAAa,CAACc,OAAd,CAAsBC,KAA3C,CACA,GAAMC,gBAAe,CAAGf,gBAAgB,CAACa,OAAjB,CAAyBC,KAAjD,CACAE,KAAK,CACH,mHADG,CAEH,CACEC,MAAM,CAAE,MADV,CAEEC,IAAI,CAAEX,IAAI,CAACC,SAAL,CAAe,CACnBW,KAAK,CAAEP,YADY,CAEnBQ,QAAQ,CAAEL,eAFS,CAGnBM,iBAAiB,CAAE,IAHA,CAAf,CAFR,CAOEC,OAAO,CAAE,CAAE,eAAgB,kBAAlB,CAPX,CAFG,CAAL,CAYGC,IAZH,CAYQ,SAACC,GAAD,CAAS,CACb,GAAIA,GAAG,CAACC,EAAR,CAAY,CACVvB,UAAU,CAAC,IAAD,CAAV,CACA,MAAOsB,IAAG,CAACE,IAAJ,EAAP,CACD,CAHD,IAGO,CACL,MAAOF,IAAG,CAACE,IAAJ,GAAWH,IAAX,CAAgB,UAAM,CAC3B,GAAII,aAAY,CAAG,wBAAnB,CACAzB,UAAU,CAAC,KAAD,CAAV,CACA0B,KAAK,CAACD,YAAD,CAAL,CACA,KAAM,IAAIE,MAAJ,CAAUF,YAAV,CAAN,CACD,CALM,CAAP,CAMD,CACF,CAxBH,EAyBGJ,IAzBH,CAyBQ,SAACO,IAAD,CAAU,CACd;AACA3B,uBAAuB,CAAC2B,IAAI,CAACX,KAAN,CAAvB,CACD,CA5BH,EA6BGY,KA7BH,CA6BS,SAACC,GAAD,CAAS,CACdJ,KAAK,CAACI,GAAG,CAACC,OAAL,CAAL,CACD,CA/BH,EAgCD,CArCD,CAuCA,mBACE,aAAK,SAAS,CAAC,aAAf,wBACE,cAAM,SAAS,CAAC,OAAhB,CAAwB,QAAQ,CAAExB,aAAlC,wBACE,WAAI,SAAS,CAAC,MAAd,0BADF,cAEE,cACE,IAAI,CAAC,MADP,CAEE,SAAS,CAAC,cAFZ,CAGE,WAAW,CAAC,OAHd,CAIE,GAAG,CAAEV,aAJP,EAFF,cAQE,aARF,cASE,cACE,IAAI,CAAC,UADP,CAEE,SAAS,CAAC,cAFZ,CAGE,WAAW,CAAC,UAHd,CAIE,GAAG,CAAEC,gBAJP,EATF,CAeG,CAACC,OAAD,eACC,eAAQ,SAAS,CAAC,gCAAlB,oBAhBJ,GADF,CAoBGA,OAAO,eAAI,KAAC,QAAD,EAAU,EAAE,CAAC,WAAb,EApBd,GADF,CAwBD,CAED,cAAeH,aAAf"},"metadata":{},"sourceType":"module"}